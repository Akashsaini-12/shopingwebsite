const{MinimogThemeStyles,MinimogThemeScripts}=window;class QuickView{constructor(){this.modal=new MinimogTheme.Modal,this.isOpen=!1,this.isLoading=!1,addEventDelegate({selector:".m-product-quickview-button",handler:(e,target)=>{if(e.preventDefault(),this.isLoading)return;this.target=target,this.toggleLoading(!0);const productHandle=target.dataset.productHandle;productHandle&&this.loadProductQuickView(productHandle)}}),window.MinimogEvents.subscribe(MinimogTheme.pubSubEvents.cartUpdate,()=>{this.modal&&this.modal.close()}),window.MinimogEvents.subscribe("ON_MODAL_CLOSED",modal=>{this.close()})}loadProductQuickView(productHandle){this.isOpen&&this.modal&&this.modal.close(),this.isLoading=!0,fetchSection("product-quickview",{url:`${window.MinimogSettings.base_url}products/${productHandle}`}).then(html=>{this.modalContent=html.querySelector("#MainProduct-quick-view__content");const colorScheme=html.querySelector("product-info").dataset.colorScheme;this.modal.appendChild(this.modalContent),this.modal.setWidth("960px"),this.modal.modal.querySelector("#MainProduct-quick-view__content").querySelectorAll("script").forEach(oldScriptTag=>{const newScriptTag=document.createElement("script");Array.from(oldScriptTag.attributes).forEach(attribute=>{newScriptTag.setAttribute(attribute.name,attribute.value)}),newScriptTag.appendChild(document.createTextNode(oldScriptTag.innerHTML)),oldScriptTag.parentNode.replaceChild(newScriptTag,oldScriptTag)}),this.modal.open(),this.modal.setSizes(`m-gradient ${colorScheme}`),this.toggleLoading(!1),this.isOpen=!0,this.isLoading=!1}).then(()=>{document.dispatchEvent(new CustomEvent("tcustomizer-custom-show-quick-view",{detail:{productHandle:this.target.dataset.productHandle}})),document.dispatchEvent(new CustomEvent("quick-view:loaded",{detail:{productUrl:this.target.dataset.productHandle}}))}).catch(error=>{console.error("Error loading product quick view:",error)})}close(){this.isOpen=!1}toggleLoading(isLoading){isLoading?this.target.classList.add("m-spinner-loading"):this.target.classList.remove("m-spinner-loading")}}MinimogTheme.ProductQuickView=new QuickView;
//# sourceMappingURL=/cdn/shop/t/10/assets/product-quick-view.js.map?v=108327601157308923661743041044
