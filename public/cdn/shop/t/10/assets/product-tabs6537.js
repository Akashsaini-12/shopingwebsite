if(!customElements.get("m-product-tabs")){class MProductTabs extends HTMLElement{constructor(){super(),this.selectors={loadMoreBtn:"[data-load-more-product]",productsContainer:"[data-products-container]",tabContent:[".m-tab-content"]},this.tabSliders=[],this.sliderEnabled=this.dataset.enableSlider==="true",this.mobileSliderDisable=this.dataset.mobileDisableSlider==="true",this.buttonType=this.dataset.buttonType,this.domNodes=queryDomNodes(this.selectors,this),this.showPagination=this.dataset.showPagination==="true",this.showNavigation=this.dataset.showNavigation==="true",this.items=this.dataset.items}connectedCallback(){this.init()}init(){if(this.sliderEnabled)for(let block of this.domNodes.tabContent)this.initSliderByScreenSize(block),document.addEventListener("matchMobile",()=>{this.initSliderByScreenSize(block)}),document.addEventListener("unmatchMobile",()=>{this.initSliderByScreenSize(block)});if(!this.sliderEnabled&&this.buttonType==="load"){this.canLoad=!0,this.currentPage=1;for(let block of this.domNodes.tabContent)this.initLoadMore(block)}if(MinimogTheme.config.mqlMobile&&this.mobileSliderDisable&&this.buttonType==="load"){this.canLoad=!0,this.currentPage=1;for(let block of this.domNodes.tabContent)this.initLoadMore(block)}document.addEventListener("matchMobile",()=>{if(MinimogTheme.config.mqlMobile&&this.mobileSliderDisable&&this.buttonType==="load"){this.canLoad=!0,this.currentPage=1;for(let block of this.domNodes.tabContent)this.initLoadMore(block)}}),this.initTabs(),this.initMobileSelect(),Shopify.designMode&&document.addEventListener("shopify:block:select",event=>{if(!event.target.classList.contains("m-tab-content"))return;const dataIndex=event.target&&event.target.dataset.index;this.tabs.setActiveTab(dataIndex)})}initTabs(){this.tabs=new MinimogTheme.Tabs(this,target=>{const tabId=target.getAttribute("href"),slider=this.querySelector(tabId+" .swiper-container"),controlsContainer=this.querySelector(tabId+" .m-slider-controls");slider&&slider.swiper&&slider.swiper.update();const firstItem=slider&&(slider.querySelector(".m-image")||slider.querySelector(".m-placeholder-svg"));if(firstItem&&controlsContainer){const itemHeight=firstItem.clientHeight;controlsContainer.style.setProperty("--offset-top",parseInt(itemHeight)/2+"px")}})}initSliderByScreenSize(sliderContainer){const mobileDisableSlider=this.dataset.mobileDisableSlider==="true",slider=sliderContainer.querySelector(".m-mixed-layout__wrapper"),controlsContainer=sliderContainer.querySelector(".m-slider-controls");MinimogTheme.config.mqlMobile&&mobileDisableSlider?(controlsContainer&&controlsContainer.classList.add("m:hidden"),slider.classList.remove("swiper-container"),slider.swiper&&slider.swiper.destroy(!1,!0)):(controlsContainer&&controlsContainer.classList.remove("m:hidden"),setTimeout(()=>{this.initSlider(sliderContainer)}))}initSlider(sliderContainer){const layoutWrapper=sliderContainer.querySelector(".m-product-list"),swiper=sliderContainer&&sliderContainer.querySelector(".m-mixed-layout__wrapper"),controlsContainer=sliderContainer.querySelector(".m-slider-controls"),prevButton=controlsContainer&&controlsContainer.querySelector(".m-slider-controls__button-prev"),nextButton=controlsContainer&&controlsContainer.querySelector(".m-slider-controls__button-next"),slideItemsLength=sliderContainer&&sliderContainer.querySelector(".swiper-wrapper")&&sliderContainer.querySelector(".swiper-wrapper").childElementCount;if(parseInt(this.items)>=slideItemsLength){controlsContainer&&controlsContainer.classList.add("m:hidden"),layoutWrapper.classList.add("m-mixed-layout--mobile-grid");return}swiper&&swiper.classList.add("swiper-container");let slider=new MinimogLibs.Swiper(swiper,{slidesPerView:2,showPagination:this.showPagination,showNavigation:this.showNavigation,loop:!this.enableFlashsale,pagination:this.showPagination?{el:sliderContainer.querySelector(".swiper-pagination"),clickable:!0}:!1,breakpoints:{768:{slidesPerView:parseInt(this.items)>=3?3:parseInt(this.items)},992:{slidesPerView:parseInt(this.items)>=4?4:parseInt(this.items)},1280:{slidesPerView:parseInt(this.items)}},threshold:2,on:{init:function(){setTimeout(()=>{const firstItem=sliderContainer.querySelector(".m-image")||sliderContainer.querySelector(".m-placeholder-svg");if(firstItem&&controlsContainer){const itemHeight=firstItem.clientHeight;controlsContainer.style.setProperty("--offset-top",parseInt(itemHeight)/2+"px"),prevButton.classList.remove("m:hidden"),nextButton.classList.remove("m:hidden")}},200)},breakpoint:(swiper2,breakpointParams)=>{if(controlsContainer){const{slidesPerView}=breakpointParams;slideItemsLength>slidesPerView?(controlsContainer.classList.remove("m:hidden"),swiper2.allowTouchMove=!0):(controlsContainer.classList.add("m:hidden"),swiper2.allowTouchMove=!1)}}}});slider&&this.showNavigation&&(prevButton&&prevButton.addEventListener("click",()=>slider.slidePrev()),nextButton&&nextButton.addEventListener("click",()=>slider.slideNext()))}initMobileSelect(){this.select=this.querySelector("[data-tab-select]"),this.select.addEventListener("change",()=>{this.tabs.setActiveTab(parseInt(this.select.value));const slider=this.tabs&&this.tabs.currentTab&&this.tabs.currentTab.querySelector(".swiper-container"),controlsContainer=this.tabs&&this.tabs.currentTab&&this.tabs.currentTab.querySelector(".m-slider-controls"),prevButton=controlsContainer&&controlsContainer.querySelector(".m-slider-controls__button-prev"),nextButton=controlsContainer&&controlsContainer.querySelector(".m-slider-controls__button-next");slider&&slider.swiper&&slider.swiper.update();const firstItem=slider&&slider.querySelector(".m-image");if(firstItem&&controlsContainer){const itemHeight=firstItem.clientHeight;controlsContainer.style.setProperty("--offset-top",parseInt(itemHeight)/2+"px"),prevButton.classList.remove("m:hidden"),nextButton.classList.remove("m:hidden")}})}initLoadMore(wrapper){addEventDelegate({context:wrapper,selector:this.selectors.loadMoreBtn,handler:e=>{e.preventDefault(),this.handleLoadMore(wrapper)}})}handleLoadMore(wrapper){const loadBtn=wrapper.querySelector(this.selectors.loadMoreBtn),productsContainer=wrapper.querySelector(this.selectors.productsContainer);let currentPage=wrapper.dataset.page;currentPage=parseInt(currentPage);const totalPages=wrapper.dataset.totalPages;this.toggleLoading(loadBtn,!0);const dataUrl=`${wrapper.dataset.url}?page=${currentPage+1}&section_id=${this.id}`;fetchCache(dataUrl).then(html=>{currentPage++,wrapper.dataset.page=currentPage,this.toggleLoading(loadBtn,!1);const dom=generateDomFromString(html),tabId=wrapper.getAttribute("id"),products=dom.querySelector(`#${tabId} ${this.selectors.productsContainer}`);products&&Array.from(products.childNodes).forEach(product=>productsContainer.appendChild(product)),currentPage>=parseInt(totalPages)&&loadBtn&&loadBtn.remove()}),loadBtn.blur()}toggleLoading(loadBtn,status){loadBtn&&(status?loadBtn.classList.add("m-spinner-loading"):loadBtn.classList.remove("m-spinner-loading"))}}customElements.define("m-product-tabs",MProductTabs)}
//# sourceMappingURL=/cdn/shop/t/10/assets/product-tabs.js.map?v=6788589837074460601720077273
